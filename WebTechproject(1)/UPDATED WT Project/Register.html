<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event Registration</title>
    <link rel="stylesheet" type="text/css" href="Register.css" />
  </head>
  <body>
    <div class="container">
      <form
        action="submit_registration.php"
        method="post"
        enctype="multipart/form-data"
        onsubmit="handleFormSubmission(event)"
      >
        <h2 class="form-title">Event Registration</h2>
        <label for="name"><b>Name:</b></label>
        <input type="text" id="name" name="name" required /><br />

        <label for="email"><b>Email:</b></label>
        <input
          type="email"
          id="email"
          name="email"
          pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
          title="Please enter a valid email address"
          required
        /><br />

        <label for="dob"><b>Date of Birth:</b></label>
        <input type="date" id="dob" name="dob" required /><br />

        <label for="age"><b>Age:</b></label>
        <input type="number" id="age" name="age" readonly /><br />

        <label for="state"><b>State:</b></label>
        <select
          onchange="print_city('state', this.selectedIndex);"
          id="sts"
          name="state"
          class="form-control"
          required
        ></select
        ><br />

        <label for="city"><b>City:</b></label>
        <select id="state" name="city" class="form-control" required></select
        ><br />

        <label for="pincode"><b>Pincode:</b></label>
        <input
          type="text"
          id="pincode"
          name="pincode"
          pattern="[0-9]{6}"
          title="Pincode must be 6 digits"
          required
        /><br />

        <label for="source"
          ><b>From where did you get to know about the event:</b></label
        ><br />
        <select id="source" name="source" required>
          <option value="Google">Google</option>
          <option value="Social Media">Social Media</option>
          <option value="Instagram">Instagram</option>
          <option value="Facebook">Facebook</option>
          <option value="Family">Family</option>
          <option value="Friends">Friends</option>
          <option value="Newspaper">Newspaper</option>
          <option value="Others">Others</option></select
        ><br />

        <label for="motivation"><b>Motivation to Join:</b></label
        ><br />
        <textarea
          id="motivation"
          name="motivation"
          rows="4"
          cols="50"
          required
        ></textarea
        ><br />

        <br />
        <div class="submit-button">
          <input type="submit" value="Register" />
        </div>
      </form>
    </div>
    <br />
    <br />
    <br />

    <footer>
      <p>
        &copy; 2020 MotherRiver.in &ensp;•&ensp; All rights reserved to
        Government of India &ensp;•&ensp; 7773334456
      </p>
    </footer>

    <script src="cities.js"></script>
    <script language="javascript">
      print_state("sts");

      // Function to calculate age based on Date of Birth
      document.getElementById("dob").addEventListener("change", function () {
        var dob = new Date(this.value);
        var today = new Date();
        var age = today.getFullYear() - dob.getFullYear();
        var monthDiff = today.getMonth() - dob.getMonth();
        if (
          monthDiff < 0 ||
          (monthDiff === 0 && today.getDate() < dob.getDate())
        ) {
          age--;
        }
        document.getElementById("age").value = age;
      });

      // Function to handle form submission
      function handleFormSubmission(event) {
        event.preventDefault(); // Prevent default form submission
        alert("Your response has been saved!! Thank you");
        window.location.href = "response_page.html"; // Redirect to response page
      }

      // Show footer after scrolling down
      window.addEventListener("scroll", function () {
        var footer = document.querySelector("footer");
        var scrollPosition = window.scrollY;

        // Show footer when scroll position is past a certain threshold
        if (scrollPosition > 200) {
          // Adjust the threshold as needed
          footer.style.bottom = "0";
        } else {
          footer.style.bottom = "-50px";
        }
      });
    </script>
  </body>
</html>
